{% load crispy_forms_tags %}
{% csrf_token %}

{% load static %}
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS     -->


    <!--  Light Bootstrap Table core CSS    -->
    <link href="{% static 'assets/css/light-bootstrap-dashboard.css' %}" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->


    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>

</head>

<style>
  .header {
  padding: 20px;
  display: flex;
  justify-content: space-between;
  position: sticky;
  background-color: rgb(0, 0, 0);
  z-index: 100;
  top: 0;
  box-shadow: 0 5px 8px -9px rgba(255, 255, 255, 0.75);
}

   
  .header__ok {
    display: flex;
    align-items: center;
    background-color: #fffdfb;
    padding: 0px;
    margin-left: 5px;
    border-radius: 500px;
    flex: 0.2;
    align-items: center;
  }

.main-panel {
    text-align: center; /* Align the content within the panel */
    padding: 20px; /* Optional: Add padding for some space around the content */
}
</style>
    <!-- Bootstrap core CSS     -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="{% static 'assets/css/animate.min.css' %}" rel="stylesheet"/>





    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">







    <link rel="shortcut icon" href="{% static 'assets\images\logo10.png' %}">

    <link rel="stylesheet" href="{% static 'assets\css\upload.css' %}" />
    
      <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/style3.css' %}" />
  <link rel="stylesheet" href="{% static 'assets\css\alert.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/membredesign.css' %}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/style2.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/alert.css' %}" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/atelier.css' %}" />
</head>

  

  <div class="header">

    <div class="header__left">
      <form action="{% url 'search' %}" method="post">
        {% csrf_token %}

      <a class="navbar-brand" href="{% url 'index' %}"><img src="{% static 'assets/images/logo.png' %}" alt="Progressus HTML5 template"></a>
    </div>

    
     
     
   

  
          
            <div class="header__middle">

          <div class="header__input" >
              <span class="material-icons"> search </span><input name="query" type="text" placeholder="Search intellcap|stage" />
            </div>       
            

     
     

        <div class="header__option">
          <button   type="sumbit" class="btn btn-primary" > <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>

   
          </button>
       
        </div>
      </form>

      


      



      

    </div>


    <div class="header__right">
      <div class="header__info">
        
      <a href=""> <strong style="color: blanchedalmond; font-family: Arial, sans-serif; font-size: 18px;">&ensp;{{user.username}}</strong></a> 
      </div>
      
      <a href="{% url 'log_out_stagiaire' %}"><span class="material-icons"> logout </span></a>


      
    </div>

      
    </div>

    <body>

      
    <div class="main-panel">
        

        <div class="content">
            <div class="container-fluid">
              
                <div class="row">
                  
                    <div class="col-md-4">
                        <div class="card">

                            <div class="">
                                <h4 class="title">Taks | document Statistics</h4>
                            </div>
                            <div class="content">
                                <div id="chartPreferences" class="ct-chart ct-perfect-fourth"></div>
                               
                                <div class="footer">
                                    <div class="legend" >
                                        

                                        
                                        
                                          {% for task in tasks %}
                                            <i class="fa fa-circle task-circle"></i> <strong> {{ task.task_Name }} % </strong><br>
                                          {% endfor %}
                                      
                                        <script>
                                          const colors2 = ['#1DC7EA', '#FB404B', '#FFA534', '#9368E9', '#87CB16', '#1F77D0', '#5e5e5e', '#dd4b39', '#35465c', '#e52d27', '#55acee', '#cc2127', '#1769ff', '#6188e2', '#a748ca', '#a748ca'];
                                          const circles = document.querySelectorAll('.task-circle');
                                      
                                          circles.forEach((circle, index) => {
                                            circle.style.color = colors2[index % colors2.length];
                                          });
                                        </script>
                                       
                                    </div>
                                    <hr>
                                    <div class="stats">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="card">
                            <div class="">
                                <h4 class="title">Users Behavior</h4>
                                <p class="category">documents taks per day </p>
                            </div>
                            <div class="content">
                                <div id="chartHours" class="ct-chart" ></div>
                                <div class="footer">
                                    <div class="legend" id="legend-container">
                                        <script type="text/javascript">
                                            // Define hoursData
                                            const hoursData = {
                                                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
                                                series: [
                                                    [10, 20, 15, 25, 30],
                                                    [12, 14, 0, 34, 46],
                                                    [12, 4, 45, 67],
                                                    [35, 89, 0, 34],
                                                    [24, 4, 0, 56],
                                                    [19, 35, 11, 24],
                                                    [20, 12, 43, 60],

                                                    [0, 0, 0, 0],
                                                    [98, 4, 66, 7],

                                                ]
                                            };
                                                                                    </script>

                                        
                                          
                                          {% for task in tasks %}
                                            <i class="fa fa-circle task-circle"></i> <strong> {{ task.task_Name }} % </strong><br>
                                          {% endfor %}
                                      
                                        <script>
                                          const colors3 = ['#1DC7EA', '#FB404B', '#FFA534', '#9368E9', '#87CB16', '#1F77D0', '#5e5e5e', '#dd4b39', '#35465c', '#e52d27', '#55acee', '#cc2127', '#1769ff', '#6188e2', '#a748ca', '#a748ca'];
                                          const circles2 = document.querySelectorAll('.task-circle');
                                      
                                          circles2.forEach((circle, index) => {
                                            circle.style.color = colors3[index % colors3.length];
                                          });
                                        </script>



                                    </div>
                                    <hr>
                                    <div class="stats">
                                        <i class="fa fa-history"></i> Updated 3 minutes ago
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <div class="row">
                    <div class="col-md-6">
                        <div class="card ">
                            <div class="">
                                <h4 class="title">Request and respond  </h4>
                                <p class="category"> </p>
                            </div>
                            <div class="content">
                                <div id="chartActivity" class="ct-chart"></div>

                                <div class="footer">
                                    <div class="legend">
                                        <i class="fa fa-circle text-info"></i> Requests
                                        <i class="fa fa-circle text-danger"></i>Responds
                                    </div>
                                    <hr>
                                    <div class="stats">
                                        <i class="fa fa-check"></i> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card ">
                            <div class="">
                                <h4 class="title">Tasks</h4>
                                <p class="">
                                    <h>{{offre.domaine}} |</h>

                                    <h>{{offre.mission}} |</h>
                                    <h>{{offre.dure}} |</h></p>

                            </div>
                            <div class="content">
                                <div class="table-full-width">
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>
													
                                                </td>
                                                <td>Task name</td>
                                                <td>Nombre document</td>

                                               
                                            </tr>
                                            {% for single_task in tasks %}
                                            <tr>
                                                <td>
													
                                                </td>
                                                <td>{{single_task.task_Name}}</td>
                                                <td> 
                                                    {% for task_count in task_counts %}
                                                    {% if task_count.id == single_task.id %}
                                                        {{ task_count.document_count }}
                                                    {% endif %}
                                                {% endfor %}
                                                </td>

                                            </tr>
                                            {% endfor %}

                                            
                                        </tbody>
                                    </table>
                                </div>

                                <div class="footer">
                                    <hr>
                                    <div class="stats">
                                        <i class="fa fa-history"></i> Updated 3 minutes ago
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


       

    </div>
</div>


</body>

    <!--   Core JS Files   -->
    <script src="{% static 'assets/js/jquery.3.2.1.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/js/bootstrap.min.js' %}" type="text/javascript"></script>

	<script src="{% static 'assets/js/chartist.min.js' %}"></script>

   

	<script type="text/javascript">
        
    	$(document).ready(function(){

           
    var preferencesData = JSON.parse('{{ json_data|escapejs }}');


   

    var activityData = {
        labels: ['Tesla Model S', 'BMW 5 Series'],
        series: [10, 20]
    };



    var hoursData2 = {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
        series: [[12, 20, 15, 2,8],[10,14,9,1,3]]

    };

    var optionsSales = {
          lineSmooth: false,
          low: 0,
          high: 200,
          showArea: true,
          height: "245px",
          axisX: {
            showGrid: false,
          },
          lineSmooth: Chartist.Interpolation.simple({
            divisor: 3
          }),
          showLine: false,
          showPoint: false,
        };

        var responsiveSales = [
          ['screen and (max-width: 640px)', {
            axisX: {
              labelInterpolationFnc: function (value) {
                return value[0];
              }
            }
          }]
        ];

    // Update chart with dummy data
    new Chartist.Pie('#chartPreferences', preferencesData);
    new Chartist.Line('#chartHours', hoursData,responsiveSales);
    new Chartist.Bar('#chartActivity', hoursData2);
        	
    	});
	</script>

</html>
